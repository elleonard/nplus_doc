<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8" />
  
  <title>RPGツクールMV 良いプラグインとは | ぷらずま式改</title>
  <meta name="author" content="NPlasma" />

  
  <meta name="description" content="NPlasmaの個人メモ" />
  

  

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

  <meta property="og:title" content="RPGツクールMV 良いプラグインとは" />
  <meta property="og:site_name" content="ぷらずま式改" />

  
  

  
    <meta property="og:image" content="/img/ogp.png" />
  

  <!-- ogp -->
  
    
      <meta name="description" content="RPGツクールMVにおける、良いプラグインの書き方や見分け方について書きます。">
<meta property="og:type" content="article">
<meta property="og:title" content="RPGツクールMV 良いプラグインとは">
<meta property="og:url" content="https://elleonard.github.io/nplus_doc/2019/11/28/engineering/rmmv/good-plugin/index.html">
<meta property="og:site_name" content="ぷらずま式改">
<meta property="og:description" content="RPGツクールMVにおける、良いプラグインの書き方や見分け方について書きます。">
<meta property="og:locale" content="ja_JP">
<meta property="article:published_time" content="2019-11-27T18:02:09.000Z">
<meta property="article:modified_time" content="2022-04-16T09:44:10.485Z">
<meta property="article:author" content="NPlasma">
<meta property="article:tag" content="情報技術">
<meta property="article:tag" content="RPGツクールMV">
<meta property="article:tag" content="github">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@elleonard_f">
    
    <meta name="twitter:image" content="https://elleonard.github.io/nplus_doc/img/ogp.png"/>
  

  <link rel="alternate" href="/nplus_doc/atom.xml" title="ぷらずま式改" type="application/atom+xml">
  <link rel="stylesheet" href="/nplus_doc/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  


  <link rel="apple-touch-icon" sizes="180x180" href="/nplus_doc/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/nplus_doc//favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/nplus_doc//favicon/favicon-16x16.png">
  <link rel="manifest" href="/nplus_doc//favicon/site.webmanifest">
  <link rel="mask-icon" href="/nplus_doc//favicon/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <script src="https://kit.fontawesome.com/b51cad8f00.js" crossorigin="anonymous"></script>
<meta name="generator" content="Hexo 6.1.0"></head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/nplus_doc/">ぷらずま式改</a></h1>
  <h2><a href="/nplus_doc/">NPlasma個人メモ</a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/nplus_doc/">Home</a></li>
    
      <li><a href="/nplus_doc/2016/05/29/about/">About</a></li>
    
      <li><a target="_blank" rel="noopener" href="https://twitter.com/elleonard_f">Twitter</a></li>
    
      <li><a target="_blank" rel="noopener" href="https://github.com/elleonard">GitHub</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper"><article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2019-11-27T18:02:09.000Z"><a href="/nplus_doc/2019/11/28/engineering/rmmv/good-plugin/">2019-11-28</a></time>
      
      
  
    <h1 class="title">RPGツクールMV 良いプラグインとは</h1>
  

    </header>
    <div class="entry">
      
        <div id="toc" class="toc-article">
          <p class="toc-title">目次</p>
          <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB"><span class="toc-text">はじめに</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%89%AF%E3%81%84%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3%E3%81%A8%E3%81%AF%E3%81%A9%E3%81%86%E3%81%84%E3%81%86%E3%82%82%E3%81%AE%E3%81%8B"><span class="toc-text">良いプラグインとはどういうものか</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%96%E3%81%AE%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3%E3%81%A8%E7%AB%B6%E5%90%88%E3%81%97%E3%81%AB%E3%81%8F%E3%81%84"><span class="toc-text">他のプラグインと競合しにくい</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A2%E5%AD%98%E3%81%AE%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%82%92%E5%AE%8C%E5%85%A8%E3%81%AB%E4%B8%8A%E6%9B%B8%E3%81%8D%E3%81%97%E3%81%AA%E3%81%84"><span class="toc-text">既存のメソッドを完全に上書きしない</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%82%B0%E3%83%AD%E3%83%BC%E3%83%90%E3%83%AB%E3%81%AA%E7%A9%BA%E9%96%93%E3%82%92%E6%B1%9A%E6%9F%93%E3%81%97%E3%81%AA%E3%81%84"><span class="toc-text">グローバルな空間を汚染しない</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3%E3%83%91%E3%83%A9%E3%83%A1%E3%83%BC%E3%82%BF%E3%81%AE%E5%9E%8B%E3%81%8C%E6%8C%87%E5%AE%9A%E3%81%95%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8B"><span class="toc-text">プラグインパラメータの型が指定されている</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E3%82%B9%E3%82%AF%E3%82%B7%E3%83%A7%E4%BB%98%E3%81%8D%E3%81%AE%E3%83%9E%E3%83%8B%E3%83%A5%E3%82%A2%E3%83%AB%E3%81%8C%E3%81%82%E3%82%8B"><span class="toc-text">スクショ付きのマニュアルがある</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8B%B1%E8%AA%9E%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%8C%E3%81%A4%E3%81%84%E3%81%A6%E3%81%84%E3%82%8B"><span class="toc-text">英語ドキュメントがついている</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A8%8B%E3%82%88%E3%81%84%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%9E%E3%82%A4%E3%82%BA%E6%80%A7%E3%81%8C%E3%81%82%E3%82%8B"><span class="toc-text">程よいカスタマイズ性がある</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%AF%E8%AA%AD%E6%80%A7%E3%81%AB%E5%84%AA%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8B%EF%BC%88%E8%AA%AD%E3%81%BF%E3%82%84%E3%81%99%E3%81%84%EF%BC%89"><span class="toc-text">可読性に優れている（読みやすい）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%89%AF%E3%81%84%E3%82%A8%E3%83%87%E3%82%A3%E3%82%BF%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E6%9B%B8%E3%81%8B%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8B"><span class="toc-text">良いエディタを使って書かれている</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%83%9E%E3%82%B8%E3%83%83%E3%82%AF%E3%83%8A%E3%83%B3%E3%83%90%E3%83%BC%E3%81%8C%E4%BD%BF%E3%82%8F%E3%82%8C%E3%81%A6%E3%81%84%E3%81%AA%E3%81%84"><span class="toc-text">マジックナンバーが使われていない</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%91%BD%E5%90%8D%E8%A6%8F%E5%89%87%E3%81%8C%E7%B5%B1%E4%B8%80%E3%81%95%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8B"><span class="toc-text">命名規則が統一されている</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%91%BD%E5%90%8D%E3%81%AB%E4%B8%80%E6%84%8F%E6%80%A7%E3%81%8C%E3%81%82%E3%82%8B"><span class="toc-text">命名に一意性がある</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%82%88%E3%82%8A%E3%83%A2%E3%83%80%E3%83%B3%E3%81%AAJavaScript%E3%81%A7%E6%9B%B8%E3%81%8B%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8B"><span class="toc-text">よりモダンなJavaScriptで書かれている</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A9%9F%E8%83%BD%E3%81%8C%E5%8D%98%E4%B8%80%E3%81%A7%E3%81%82%E3%82%8B"><span class="toc-text">機能が単一である</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E3%83%A1%E3%83%B3%E3%83%86%E3%83%8A%E3%83%B3%E3%82%B9%E6%80%A7%E3%81%AB%E5%84%AA%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8B"><span class="toc-text">メンテナンス性に優れている</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%81%97%E3%81%A3%E3%81%8B%E3%82%8A%E3%83%90%E3%83%BC%E3%82%B8%E3%83%A7%E3%83%B3%E7%AE%A1%E7%90%86%E3%81%95%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8B"><span class="toc-text">しっかりバージョン管理されている</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%B9%E6%98%93%E3%81%AB%E3%82%B3%E3%83%9F%E3%83%83%E3%83%88%E3%81%A7%E3%81%8D%E3%82%8B"><span class="toc-text">容易にコミットできる</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Strict%E3%83%A2%E3%83%BC%E3%83%89%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%84%E3%82%8B"><span class="toc-text">Strictモードを使っている</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%AD%A3%E3%81%97%E3%81%8F%E3%82%AA%E3%83%BC%E3%83%97%E3%83%B3%E3%82%BD%E3%83%BC%E3%82%B9%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2%E3%83%A9%E3%82%A4%E3%82%BB%E3%83%B3%E3%82%B9%EF%BC%88%E3%82%B3%E3%83%94%E3%83%BC%E3%83%AC%E3%83%95%E3%83%88%E3%81%A7%E3%81%AA%E3%81%84%E3%82%82%E3%81%AE%EF%BC%89%E3%81%8C%E8%A8%AD%E5%AE%9A%E3%81%95%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8B"><span class="toc-text">正しくオープンソースソフトウェアライセンス（コピーレフトでないもの）が設定されている</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8B%AC%E8%87%AA%E3%81%AE%E5%88%A9%E7%94%A8%E8%A6%8F%E7%B4%84%E3%81%AF%E5%8F%AF%E8%83%BD%E3%81%AA%E9%99%90%E3%82%8A%E9%81%BF%E3%81%91%E3%82%8B"><span class="toc-text">独自の利用規約は可能な限り避ける</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%82%B3%E3%83%94%E3%83%BC%E3%83%AC%E3%83%95%E3%83%88%E3%81%AA%E3%83%A9%E3%82%A4%E3%82%BB%E3%83%B3%E3%82%B9%E3%81%AF%E9%81%BF%E3%81%91%E3%82%8B"><span class="toc-text">コピーレフトなライセンスは避ける</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%83%A9%E3%82%A4%E3%82%BB%E3%83%B3%E3%82%B9%E3%82%92%E5%A4%89%E6%9B%B4%E3%81%99%E3%82%8B%E9%9A%9B%E3%81%AB%E3%81%AF%E3%83%90%E3%83%BC%E3%82%B8%E3%83%A7%E3%83%B3%E3%82%92%E4%B8%8A%E3%81%92%E3%82%8B"><span class="toc-text">ライセンスを変更する際にはバージョンを上げる</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E3%81%8A%E3%82%8F%E3%82%8A%E3%81%AB"><span class="toc-text">おわりに</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E3%83%AA%E3%83%B3%E3%82%AF"><span class="toc-text">参考リンク</span></a></li></ol>
        </div>
        <p>RPGツクールMVにおける、良いプラグインの書き方や見分け方について書きます。</p>
<span id="more"></span>

<h1 id="はじめに"><a href="#はじめに" class="headerlink" title="はじめに"></a>はじめに</h1><p>RPGツクールMVのプラグインはJavaScriptで書かれています。<br>これはかなりやさしい言語<sup class="footnote-ref"><a href=#fn1 id="fnref1" title="言語のやさしさの定義は諸説あるが、ここではとりあえず書いて動かすのが簡単、くらいの意味としておく。">1</a></sup>で、プログラミングに初めて挑戦する人が頑張ってゴリゴリと書いたプラグインが転がっていたり、実際に使われていたりします。<br>中には機能として非常に優れているものも多くあるのですが、同時に書き方の作法を知らないままに書いたために、別の場所で利用者に不便を強いてしまうようなプラグインも散見されます。</p>
<p>この記事では、プログラミングの作法<sup class="footnote-ref"><a href=#fn2 id="fnref2" title="単にコードを書くだけでなく、そのコードの管理方法や公開方法も含めてプログラミングの作法と呼ぶ。">2</a></sup>から見た良いプラグインの書き方、良いプラグインの見分け方について記します。</p>
<p>プラグインを書こうとしている人、書いて公開している人はもちろん、プラグインを利用する人もぜひ読んでください。</p>
<h1 id="良いプラグインとはどういうものか"><a href="#良いプラグインとはどういうものか" class="headerlink" title="良いプラグインとはどういうものか"></a>良いプラグインとはどういうものか</h1><p>良いプラグインの定義を、以下のようにします。</p>
<ul>
<li>その機能がほしいと思ってゲームに取り込んだ際に不都合が起きにくい</li>
<li>不都合が起きたとして、その原因を容易に特定でき、解消できる</li>
<li>その他、利用者にできるだけ不便を強いない</li>
</ul>
<p>では、その詳細について説明しましょう。</p>
<h2 id="他のプラグインと競合しにくい"><a href="#他のプラグインと競合しにくい" class="headerlink" title="他のプラグインと競合しにくい"></a>他のプラグインと競合しにくい</h2><p>RPGツクールMVのプラグインは、他のプラグインと競合することがあります。<br>異なる2つのプラグインを有効にしたとき、どちらか一方あるいは両方ともが正常に動作しなくなることがよくあります。</p>
<p>これを完全に防ぐ手立てはありませんが、それでも競合しにくい書き方があります。</p>
<h3 id="既存のメソッドを完全に上書きしない"><a href="#既存のメソッドを完全に上書きしない" class="headerlink" title="既存のメソッドを完全に上書きしない"></a>既存のメソッドを完全に上書きしない</h3><p>RPGツクールMVのプログラム内に書かれたメソッドを上書きして、プラグインの機能を実現することはよくあります。<br>このとき、まるごと上書きして別の処理を行うメソッドとして定義してしまうと、他のプラグインと競合しやすくなります。<br>元のメソッドを呼び出した上で、新しい処理を追加するほうが安全です。</p>
<p>ちなみに、YEPのコア系プラグインはゲームの中核を担うメソッドを大量にまるごと上書きしているため、容易に競合します。</p>
<h3 id="グローバルな空間を汚染しない"><a href="#グローバルな空間を汚染しない" class="headerlink" title="グローバルな空間を汚染しない"></a>グローバルな空間を汚染しない</h3><p>良いプラグインは、基本的にプラグインの中でスコープを閉じています。<br>良いプラグインを読むと以下のようなコードになっていることがわかるでしょう。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="comment">// ここにプラグインの処理</span></span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<p>このfunctionの書き方を無名関数と言います。<br>この中で新たに定義されたシンボル<sup class="footnote-ref"><a href=#fn3 id="fnref3" title="変数や定数、クラスを指し示す名前のこと。">3</a></sup>は他のプラグインから参照できません。<br>参照できるものはすなわち、そのシンボルが指し示す内容を上書きされる可能性があるということです。</p>
<p>意図しない上書きが発生した場合、プラグインが正常に動かなくなるのは言うまでもないでしょう。</p>
<h2 id="プラグインパラメータの型が指定されている"><a href="#プラグインパラメータの型が指定されている" class="headerlink" title="プラグインパラメータの型が指定されている"></a>プラグインパラメータの型が指定されている</h2><p>RPGツクールMVのプラグインパラメータは、型を指定することができます。<br>@typeで数値、文字列、真偽値、その他様々な型を指定できます。<br>特にbooleanなど、ツクールエディタ上で設定する際に、利用者に親切なUIが表示されてくれるため、プラグインパラメータには必ず型を指定するようにしましょう。</p>
<p>また、配列や構造体を駆使してツクールエディタ上での表示を整理すると、よりユーザーフレンドリーになります。</p>
<p>詳細は以下のページにわかりやすくまとめられています。</p>
<p><a target="_blank" rel="noopener" href="https://www.5ing-myway.com/rpgmaker-plugin-parameter-type/">RPGツクールMV　プラグインパラメータのtypeまとめ | 趣味に生きる。</a></p>
<h2 id="スクショ付きのマニュアルがある"><a href="#スクショ付きのマニュアルがある" class="headerlink" title="スクショ付きのマニュアルがある"></a>スクショ付きのマニュアルがある</h2><p>利用者にとって、使い方がわかりやすくなるため、マニュアルにはぜひ利用例や設定例のスクリーンショットを載せましょう。</p>
<p>筆者のプラグインはこれをサボってしまっているのであまり強くは言えないのですが、いずれ落ち着いたらしっかりマニュアルを書きたいと思っています。</p>
<h2 id="英語ドキュメントがついている"><a href="#英語ドキュメントがついている" class="headerlink" title="英語ドキュメントがついている"></a>英語ドキュメントがついている</h2><p>RPGツクールMVは海外でも使われています。<sup class="footnote-ref"><a href=#fn4 id="fnref4" title="RPG Maker MV, RMMV などと呼ばれる。">4</a></sup><br>海外ユーザへの説明のために英語ドキュメントがついているととても良いです。</p>
<p>ただし、これを実現できているプラグインはとても少なく、また説明テキストの英訳は少々骨が折れる作業ですので、これを作る優先度はそこまで高くありません。</p>
<p>ちなみに、よく使われているMOGのプラグインはポルトガル語で説明が書かれていて、読むのが困難です。<br><a target="_blank" rel="noopener" href="http://plugin.fungamemake.com/">RPGツクールMV用プラグイン投稿・告知サイト - #ツクプラ</a>にて、ムノクラさんが日本語訳を公開されているため、それを頼ると良いでしょう。</p>
<h2 id="程よいカスタマイズ性がある"><a href="#程よいカスタマイズ性がある" class="headerlink" title="程よいカスタマイズ性がある"></a>程よいカスタマイズ性がある</h2><p>プラグイン作者が自分で使うためにあらゆる値を決め打ちしてしまい、ユーザーからするとかゆいところに手が届かないプラグインになってしまうケースがあります。筆者もやってしまいがちです。<br>ユーザーが設定できると嬉しいな、と思える値はプラグインパラメータに切り出しましょう。<sup class="footnote-ref"><a href=#fn5 id="fnref5" title="利用者にプラグインの中身を直接触らせるのは論外です。">5</a></sup><br>これを見極めるためにはRPGを実際に作ってみるのが一番良いのですが……。</p>
<h2 id="可読性に優れている（読みやすい）"><a href="#可読性に優れている（読みやすい）" class="headerlink" title="可読性に優れている（読みやすい）"></a>可読性に優れている（読みやすい）</h2><p>読みやすいプラグインはそれだけで良いプラグインとしての条件を一つ満たしています。<br>なぜなら、コードを書き慣れた人に読んでもらいやすくなるからです。</p>
<p>たとえプラグインの動作自体に疑問を持たれたり、あるいは衝突の要因であることが疑われても、コードが読みやすければその原因は特定しやすいでしょう。</p>
<p>この記事では良いプラグインの条件において、読みやすさを最重要視し、以下に読みやすいプラグインについて述べます。</p>
<h3 id="良いエディタを使って書かれている"><a href="#良いエディタを使って書かれている" class="headerlink" title="良いエディタを使って書かれている"></a>良いエディタを使って書かれている</h3><p>プラグインの書き方として、良いエディタを使って書かれているというのは大変重要なことです。</p>
<p>RPGツクールMV用のプラグインでは、これをおろそかにしているケースが大変多く見受けられます。<br>コードを見ただけで良いエディタを使っていないことがなぜわかるかというと、コードがまるで整形されていないからです。</p>
<p>プログラムには読みやすいとされている形式の書き方、すなわちお作法があり、それに則っていないコードは見ただけで、良いエディタを使っていないことがわかってしまいます。</p>
<p>最も重要なのはインデントで、これが揃えられているだけでも読みやすさがまるで違います。<br>インデントを揃えるだけでプログラムの構造が視覚的に捉えやすくなり、不具合の調査/修正や機能追加のために支払うべき労力が大幅に減ります。<br>良いエディタにはコードフォーマット機能が搭載されており、ショートカットキーを押したり、設定さえしておけば保存する際に自動的にフォーマットをかけてくれるものもあります。</p>
<p>インデントに関連して、ホワイトスペースの統一もぜひ意識するようにしてください。<br>インデントを頑張って揃えようとした形跡はあるが、タブ文字と半角スペースが混ざってしまっているようなプラグインをよく見かけます。<br>タブ文字と半角スペースを混ぜて使わないようにしてください。必ずどちらかに統一しなければなりません。<br>どちらを用いるかは好み次第ですが、筆者は半角スペース2つを1単位として用いています。全角スペースは論外ですので忘れてください。<sup class="footnote-ref"><a href=#fn6 id="fnref6" title="実はJavaScriptの仕様上、全角スペースは半角スペースと同じものとして扱われるため、動作自体に影響は出ない。極めて気持ち悪いコードになってしまうので、絶対に使ってはならないが。">6</a></sup></p>
<p>良いエディタでは、タブキーを押したときにインデントを設定した文字を使って行ってくれる他、改行する際に自動で良い感じにインデントしてくれたりします。<br>また、良いエディタはタブ文字や全角スペースの違いを目視で確認できるような設定ができます。</p>
<p>良いエディタとしては、プラグインのデバッグにも使いやすいVisual Studio Codeがオススメです。<sup class="footnote-ref"><a href=#fn7 id="fnref7" title="「Visual Studio Code」+「Chrome」で「ツクールMV」のローカルでデバッグなテクニックの紹介 - Qiitaを参照。">7</a></sup><br>もちろんその他の選択肢もありますので、VSCodeがお気に召さない場合はご自身で使いやすいエディタを探してみてください。</p>
<p>ちなみに、よく使われているMOG系のプラグインはホワイトスペースが統一されておらず、インデントに頓着しない書き方がされているため、可読性が良くありません。<br>機能としてはとても優れていますが、プラグインを書く際に真似しないようにしてください。</p>
<h3 id="マジックナンバーが使われていない"><a href="#マジックナンバーが使われていない" class="headerlink" title="マジックナンバーが使われていない"></a>マジックナンバーが使われていない</h3><p>意味があるにも関わらず、定数に代入せずに直接プログラム中に書かれた具体的な数字や文字列のことを、マジックナンバーと呼びます。<sup class="footnote-ref"><a href=#fn8 id="fnref8" title="問題になるケースが多く例をあげやすいのは数字だが、文字列でも同様の問題が起きる。">8</a></sup><br>マジックナンバーを使うことを、定数をハードコーディングする、などと呼びます。<br>これはバグの温床ですので、可能な限り意味のある定数を定義しましょう。</p>
<p>消費税をあちこちにハードコーディングしていたため、増税のタイミングで修正が追いつかず大騒ぎになった、なんて話をよく聞きます。<br>筆者も今どき、そんな古めかしいシステムが本当に動いているなんてことは伝聞でしか知りませんが。<sup class="footnote-ref"><a href=#fn9 id="fnref9" title="大昔にCOBOLで書かれた金融系のシステムがヤバい、とか。">9</a></sup></p>
<h3 id="命名規則が統一されている"><a href="#命名規則が統一されている" class="headerlink" title="命名規則が統一されている"></a>命名規則が統一されている</h3><p>変数や定数の命名規則が統一されていると、とても美しく読みやすいプラグインになります。</p>
<p>JavaScriptにおいて、メソッドや変数はキャメルケース、定数は大文字スネークケースを用いるのが一般的です。<br>特に強いこだわりがなければ、元のRPGツクールMVのコードを参考に、それに統一しておくと良いでしょう。</p>
<h3 id="命名に一意性がある"><a href="#命名に一意性がある" class="headerlink" title="命名に一意性がある"></a>命名に一意性がある</h3><p>良いプラグインでは、変数やプラグインコマンドの名前が、それを見ただけである程度伝わります。</p>
<p>ダメージ計算の際に、ダメージの値として使われる変数の名前が <code>a</code> としてしまうと極めて不格好で、計算が複雑になればなるほどその <code>a</code> の意味がつかみにくくなり、バグの温床になります。<br>ちゃんと <code>damage</code> などと意味のある名前をつけてあげましょう。</p>
<h3 id="よりモダンなJavaScriptで書かれている"><a href="#よりモダンなJavaScriptで書かれている" class="headerlink" title="よりモダンなJavaScriptで書かれている"></a>よりモダンなJavaScriptで書かれている</h3><p>JavaScriptは歴史の長い言語ですが、その過程でよりモダンな書き方ができるよう改良されてきています。</p>
<p><code>var</code> でなく <code>let</code> <code>const</code> を用いるほうが良いです。<br><code>var</code> と <code>let</code> に関してはスコープに関する知識がないとピンと来ない話なので、気になる人はググってください。<sup class="footnote-ref"><a href=#fn10 id="fnref10" title="RPGツクールMVは初期の頃letが普及していなかったのか、varを使って書かれている。varを使ったからと言って極端に悪いものではない。">10</a></sup><br><code>const</code> は再代入ができなくなるため、定数を定義する際にはこちらを用いましょう。</p>
<p>また、配列を操作する際にはfor文はできるだけ使わず、 <code>map</code> <code>filter</code> などの配列操作関数とラムダ式を組み合わせて使うとスッキリとした良いコードになります。</p>
<h3 id="機能が単一である"><a href="#機能が単一である" class="headerlink" title="機能が単一である"></a>機能が単一である</h3><p>単一の機能を実現するために書かれているプラグインは、自ずとプラグインそのものの規模も大きくなりにくく、読みやすい傾向にあります。<br>一つのプラグインに欲張ってあれもこれもと詰め込むとコードが肥大し、可読性を著しく下げてしまいます。</p>
<p>YEPのコア系は機能が多く、長大になっていて読み解くのに苦労します。</p>
<h2 id="メンテナンス性に優れている"><a href="#メンテナンス性に優れている" class="headerlink" title="メンテナンス性に優れている"></a>メンテナンス性に優れている</h2><p>プラグインはその時動いているように見えれば良いというものではありません。<br>将来に渡って（RPGツクールMVが使われる限り）、バグが見つかる可能性はあります。<br>また、機能追加の要望が来ることもあるでしょう。</p>
<p>そんなとき、容易にバグを特定し修正できたり、機能を簡単に追加できてほしいことは言うまでもありません。</p>
<p>そのために重要と思われる内容を以下に説明します。</p>
<h3 id="しっかりバージョン管理されている"><a href="#しっかりバージョン管理されている" class="headerlink" title="しっかりバージョン管理されている"></a>しっかりバージョン管理されている</h3><p>プラグインを見ると、バージョン1.0.0 のような表記があるかと思います。<br>このバージョンは飾りではありません。良いですか、飾りではないんですよ。</p>
<p>これは、プログラムを更新するときに変化させるべき数値です。<br>バージョニングについては、筆者はセマンティックバージョニングが好きなのでそれを用いています。</p>
<a href="/nplus_doc/2017/12/24/engineering/rmmv/rpgtkoolmv-github/" title="RPGツクールMV やさしいプラグインの書き方 基礎編">RPGツクールMV やさしいプラグインの書き方 基礎編</a>の最下部、余談の項目を参考にしてください。
<p>必ずしもセマンティックバージョニングに従う必要はなく、しかし規則的にバージョンを振ると良いでしょう。</p>
<p>さて、公開しているプラグインについて、必ず最新のバージョンにアクセスしてもらう方法があります。<br>GitHubでプラグインを公開することです。常に最新のコミットが前面に表示されるため、利用者が誤って過去のバージョンをダウンロードする心配はありません。</p>
<p>最新版に容易にアクセスできること、どれが最新版か明らかであることは、それだけで利用者に優しいのです。<br>ツクマテや公式フォーラムの掲示板の書き込みに無造作に貼り付けてあるだけだとこれがとてもわかりにくく、混乱を招きます。</p>
<h3 id="容易にコミットできる"><a href="#容易にコミットできる" class="headerlink" title="容易にコミットできる"></a>容易にコミットできる</h3><p>GitHubで最新版を公開すると、利用者からバグ報告だけでなく、修正方法を提案しやすくなる利点があります。<br>プルリクエストを受け付ければ、他の人からのコード修正を取り込むだけでバグ修正が完了することもあります。<sup class="footnote-ref"><a href=#fn11 id="fnref11" title="もちろん、動作確認は必要だが。">11</a></sup></p>
<p>GitとGitHubを利用したバージョン管理の重要性については、<a href="/nplus_doc/2017/12/24/engineering/rmmv/rpgtkoolmv-github/" title="RPGツクールMV やさしいプラグインの書き方 基礎編">RPGツクールMV やさしいプラグインの書き方 基礎編</a>にも詳しく書いてあります。長い文章ですので、余裕のあるときに読んでみてください。</p>
<h3 id="Strictモードを使っている"><a href="#Strictモードを使っている" class="headerlink" title="Strictモードを使っている"></a>Strictモードを使っている</h3><blockquote><p>第一に strict モードでは、JavaScript でエラーではないが落とし穴になる一部の事柄を、エラーが発生するように変更することで除去します。第二に strict モードでは、JavaScript エンジンによる最適化処理を困難にする誤りを修正します: strict モードのコードは、非 strict モードの同一コードより高速に実行できることがあります (Firefox 4 ではまだ strict モードにあまり最適化していませんが、将来のバージョンで実現するでしょう)。第三に strict モードでは、将来の ECMAScript で定義される予定の構文を禁止します。</p><p>Strict モード - JavaScript | MDN</p></blockquote><sup class="footnote-ref"><a href=#fn12 id="fnref12" title="Strict モード - JavaScript | MDN">12</a></sup>

<p>わかりやすく言うと、以下の通りです。</p>
<ol>
<li>エラーではないが落とし穴になるようなコードに対してエラーを発生させてくれる（結果、落とし穴にハマらずに済む）</li>
<li>コードの実行が早くなったり効率良くなったりしやすくなる</li>
<li>将来的にJavaScript自体がバージョンアップしていっても動かなくなる心配が減る</li>
</ol>
<h2 id="正しくオープンソースソフトウェアライセンス（コピーレフトでないもの）が設定されている"><a href="#正しくオープンソースソフトウェアライセンス（コピーレフトでないもの）が設定されている" class="headerlink" title="正しくオープンソースソフトウェアライセンス（コピーレフトでないもの）が設定されている"></a>正しくオープンソースソフトウェアライセンス（コピーレフトでないもの）が設定されている</h2><p>いわゆるライセンスと呼ばれるものです。<br>ライセンスは利用者に対し、そのプラグインをどう使っても良いかを明示する非常に有効な手段です。</p>
<p>良いプラグインには正しくライセンスが設定されています。</p>
<p>今現在、主流となっているMITライセンスについて知っていればだいたい事足りるでしょう。</p>
<a href="/nplus_doc/2017/11/24/engineering/rmmv/rpgtkoolmv-license/" title="RPGツクールMVのプラグイン MITライセンスについて">RPGツクールMVのプラグイン MITライセンスについて</a>に詳しく書いてあるので、ぜひ読んでみてください。

<p>ライセンスを明示しないと No License と受け取られ、使ってはいけない展示物であるという意味になってしまうため、必ずライセンスは設定しましょう。</p>
<h3 id="独自の利用規約は可能な限り避ける"><a href="#独自の利用規約は可能な限り避ける" class="headerlink" title="独自の利用規約は可能な限り避ける"></a>独自の利用規約は可能な限り避ける</h3><p>十分に調査した上で、好みのライセンスが存在しなければ仕方がありませんが、基本的にはよく知られた既存のライセンスを用いるようにしたほうが良いです。<br>よく知られたライセンスを用いるということは、利用者に対して安心感を与えます。<br>独自の利用規約はまず、利用者にそれを注意深く読ませるという負担を強いることになります。<br>その点MITライセンスはその意味さえ知っていれば、たった3文字読むだけで良いのです。実質ノーコストですね。</p>
<h3 id="コピーレフトなライセンスは避ける"><a href="#コピーレフトなライセンスは避ける" class="headerlink" title="コピーレフトなライセンスは避ける"></a>コピーレフトなライセンスは避ける</h3><p>いわゆるGPLライセンスは避けましょう。<br>詳しくは<a href="/nplus_doc/2017/11/24/engineering/rmmv/rpgtkoolmv-license/" title="RPGツクールMVのプラグイン MITライセンスについて">RPGツクールMVのプラグイン MITライセンスについて</a>にも書きましたが、それを用いて作られたゲームそのものも、同じライセンスで配布しなければならなくなるからです。</p>
<h3 id="ライセンスを変更する際にはバージョンを上げる"><a href="#ライセンスを変更する際にはバージョンを上げる" class="headerlink" title="ライセンスを変更する際にはバージョンを上げる"></a>ライセンスを変更する際にはバージョンを上げる</h3><p>これは徹底してください。<br>ライセンスは、利用者への許可であり、約束事です。<br>バージョンを変えずにライセンスのみを変えてしまっては、約束を反故にしたことになります。<br>つまり、そのプラグインは一切の信頼を失うということです。</p>
<p>過去のバージョンを公開し続ける必要はありません。<br>最新のバージョンのみ公開しても良いですが、過去のバージョンを遡ってライセンスを変更したり、バージョンを上げずにライセンスを変更するような非道な行いは絶対に許されません。</p>
<h1 id="おわりに"><a href="#おわりに" class="headerlink" title="おわりに"></a>おわりに</h1><p>良いプラグインとはなにか、どんな条件を満たすとより良いプラグインになるのかを書きました。<br>特に可読性については、かなり細かい粒度で説明しました。</p>
<p>全てを一度に意識するのは難しいことかもしれませんが、プラグインを作成される方は少しずつでもこれらを意識して、できるだけ読みやすいコードを書いてください。</p>
<p>そして、利用者でもこれらの項目に気をつけてみてください。<br>同じ機能を持ったプラグインが複数公開されていたとき、どちらを選ぶかの参考になるでしょう。</p>
<h1 id="参考リンク"><a href="#参考リンク" class="headerlink" title="参考リンク"></a>参考リンク</h1><ul>
<li><a target="_blank" rel="noopener" href="https://triacontane.blogspot.com/2016/10/mv.html">Delusional Field: ツクールMVでプラグインを作るための現実と作法</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.aotak.me/post/181270160306/rpg%E3%83%84%E3%82%AF%E3%83%BC%E3%83%ABmv%E3%81%AE%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3%E3%82%92%E4%BD%9C%E3%82%8B%E3%81%A8%E3%81%8D%E3%81%AB%E8%80%83%E3%81%88%E3%81%A6%E3%81%84%E3%82%8B%E3%81%93%E3%81%A8">RPGツクールMVのプラグインを作るときに考えていること - あおたくノート</a></li>
</ul>
  <hr class="footnotes-sep" />
  <section class="footnotes">
  <ol class="footnotes-list">
  <li id="fn1" class="footnote-item">言語のやさしさの定義は諸説あるが、ここではとりあえず書いて動かすのが簡単、くらいの意味としておく。<a href="#fnref1"> <span class="up-arrow"/></a></li>
<li id="fn2" class="footnote-item">単にコードを書くだけでなく、そのコードの管理方法や公開方法も含めてプログラミングの作法と呼ぶ。<a href="#fnref2"> <span class="up-arrow"/></a></li>
<li id="fn3" class="footnote-item">変数や定数、クラスを指し示す名前のこと。<a href="#fnref3"> <span class="up-arrow"/></a></li>
<li id="fn4" class="footnote-item">RPG Maker MV, RMMV などと呼ばれる。<a href="#fnref4"> <span class="up-arrow"/></a></li>
<li id="fn5" class="footnote-item">利用者にプラグインの中身を直接触らせるのは論外です。<a href="#fnref5"> <span class="up-arrow"/></a></li>
<li id="fn6" class="footnote-item">実はJavaScriptの仕様上、全角スペースは半角スペースと同じものとして扱われるため、動作自体に影響は出ない。極めて気持ち悪いコードになってしまうので、絶対に使ってはならないが。<a href="#fnref6"> <span class="up-arrow"/></a></li>
<li id="fn7" class="footnote-item"><a target="_blank" rel="noopener" href="https://qiita.com/Sanshiro/items/084fb0971942e03db9a4">「Visual Studio Code」+「Chrome」で「ツクールMV」のローカルでデバッグなテクニックの紹介 - Qiita</a>を参照。<a href="#fnref7"> <span class="up-arrow"/></a></li>
<li id="fn8" class="footnote-item">問題になるケースが多く例をあげやすいのは数字だが、文字列でも同様の問題が起きる。<a href="#fnref8"> <span class="up-arrow"/></a></li>
<li id="fn9" class="footnote-item">大昔にCOBOLで書かれた金融系のシステムがヤバい、とか。<a href="#fnref9"> <span class="up-arrow"/></a></li>
<li id="fn10" class="footnote-item">RPGツクールMVは初期の頃letが普及していなかったのか、varを使って書かれている。varを使ったからと言って極端に悪いものではない。<a href="#fnref10"> <span class="up-arrow"/></a></li>
<li id="fn11" class="footnote-item">もちろん、動作確認は必要だが。<a href="#fnref11"> <span class="up-arrow"/></a></li>
<li id="fn12" class="footnote-item"><a target="_blank" rel="noopener" href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Strict_mode">Strict モード - JavaScript | MDN</a><a href="#fnref12"> <span class="up-arrow"/></a></li>
  </ol>
  </section>

      
    </div>
    
    <footer>
        <div class="article-footer">
        <div class="footer-left">
        
  
  <div class="categories">
    <a href="/nplus_doc/categories/ゲーム制作/">ゲーム制作</a>
  </div>

        
  
  <div class="tags">
    <a href="/nplus_doc/tags/情報技術/">情報技術</a>, <a href="/nplus_doc/tags/RPGツクールMV/">RPGツクールMV</a>, <a href="/nplus_doc/tags/github/">github</a>
  </div>

        </div>
        <div class="footer-right">
          <a target="_blank" rel="noopener" href="https://twitter.com/share?ref_src=twsrc%5Etfw" class="twitter-share-button" data-text="RPGツクールMV 良いプラグインとは | ぷらずま式改" data-url="https://elleonard.github.io/nplus_doc/2019/11/28/engineering/rmmv/good-plugin/" data-via="elleonard_f" data-show-count="false">Tweet</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
        </div>
        </div>
        
          <div class="article-prev">
              <a href="/nplus_doc/2019/12/31/misc/2019/">2019年の振り返り <span class="prev-arrow"/></a>
            </div>
        
        
          <div class="article-next">
            <a href="/nplus_doc/2019/11/16/game/pokemon/pikachu-ev/">【ゲーム感想】ポケットモンスター Let's Go! イーブイ <span class="next-arrow"/></a>
          </div>
        
        <!-- partial('post/share') -->
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="検索">
    <input type="hidden" name="q" value="site:elleonard.github.io/nplus_doc">
  </form>
</div>

  
<div class="widget tag">
  <h3 class="title">カテゴリ</h3>
  <ul class="entry">
  
    <li><a href="/nplus_doc/categories/FGO/">FGO</a><small>47</small></li>
  
    <li><a href="/nplus_doc/categories/niconico/">niconico</a><small>3</small></li>
  
    <li><a href="/nplus_doc/categories/アニメ感想/">アニメ感想</a><small>10</small></li>
  
    <li><a href="/nplus_doc/categories/ゲーム/">ゲーム</a><small>83</small></li>
  
    <li><a href="/nplus_doc/categories/ゲーム/ゲームレビュー/">ゲームレビュー</a><small>65</small></li>
  
    <li><a href="/nplus_doc/categories/ゲーム制作/">ゲーム制作</a><small>14</small></li>
  
    <li><a href="/nplus_doc/categories/遊戯王ブロンティーズ/デッキレシピ/">デッキレシピ</a><small>4</small></li>
  
    <li><a href="/nplus_doc/categories/小説/">小説</a><small>4</small></li>
  
    <li><a href="/nplus_doc/categories/情報技術/">情報技術</a><small>11</small></li>
  
    <li><a href="/nplus_doc/categories/漫画/">漫画</a><small>2</small></li>
  
    <li><a href="/nplus_doc/categories/百合/">百合</a><small>10</small></li>
  
    <li><a href="/nplus_doc/categories/艦これ/">艦これ</a><small>76</small></li>
  
    <li><a href="/nplus_doc/categories/遊戯王ブロンティーズ/">遊戯王ブロンティーズ</a><small>4</small></li>
  
    <li><a href="/nplus_doc/categories/雑記/">雑記</a><small>10</small></li>
  
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title">最近の投稿</h3>
  <ul class="entry">
    
      <li>
        <a href="/nplus_doc/2023/02/03/game/blue-archive/blue-archive-2nd-aniversary-akihabara/">ブルーアーカイブ 暗号仕掛けの挑戦状 秋葉原スタンプラリーを制するのこと</a>
      </li>
    
      <li>
        <a href="/nplus_doc/2023/01/15/game/pokemon/scarlet/">【ゲーム感想】ポケットモンスター スカーレット</a>
      </li>
    
      <li>
        <a href="/nplus_doc/2022/12/31/misc/2022/">2022年の振り返り</a>
      </li>
    
      <li>
        <a href="/nplus_doc/2022/12/27/yuri/what-is-yuri-2022/">百合とは何か 2022年版</a>
      </li>
    
      <li>
        <a href="/nplus_doc/2022/12/26/game/edf/edf6/">【ゲーム感想】地球防衛軍6</a>
      </li>
    
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title">Link</h3>
  <ul class="entry">
    
      <li>
        <a target="_blank" rel="noopener" href="https://www.nicovideo.jp/">niconico</a>
      </li>
    
      <li>
        <a target="_blank" rel="noopener" href="http://lovingtheflags1986.blog96.fc2.com/">国旗と酒が待ち遠しいドリル日記</a>
      </li>
    
  </ul>
</div>


</aside>
    
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  <p>
  
  &copy; 2023 NPlasma
  
  All rights reserved.</p>
  <p>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></p>
</div>
<div class="alignright">
  <a target="_blank" rel="noopener" href="https://github.com/elleonard"><i class="fab fa-github"></i></a>
  <a target="_blank" rel="noopener" href="https://twitter.com/elleonard_f"><i class="fab fa-twitter-square"></i></a>
</div>
<div class="clearfix"></div>
</footer>
  <script src="/nplus_doc/js/jquery.imagesloaded.min.js"></script>
<script src="/nplus_doc/js/gallery.js"></script>


<link rel="stylesheet" href="/nplus_doc/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/nplus_doc/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>


<div id='bg'></div>
</body>
</html>
